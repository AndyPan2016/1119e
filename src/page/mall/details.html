<!DOCTYPE html>
<html>
	<head>
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <title>1119贷-同城互联网金融平台</title>
	    <link rel="shortcut icon" href="/favicon.ico" />
	    <link rel="stylesheet" href="../assets/scripts/plugins/pyui/css/pyui.css" />
        <link rel="stylesheet" type="text/css" href="../assets/css/base.css" />
        <link rel="stylesheet" href="../assets/scripts/plugins/validform_v5.3.2/Validform.css" />
	    <link rel="stylesheet" type="text/css" href="../assets/css/page.mall.css" />
	</head>
	<body>
		<div class="wrapper">
			<div class="page page-mall">
	            <!-- 头部  -->
	            @@include('../include/header.html')
	            <!-- 头部end  -->					
				<div class="container container-sticky">
					<div class="container-sticky-wrap">
                        <!-- 商品详情start -->
                        <div class="mall-details-content">
                                <div class="mall-details-crumbs"><a href="mall.html">首页</a> > <a href="#"> 实物商品</a></div>
                                <!--商品详情开始-->
                                <div class="mall-detail clearfix">
                                    <!--商品大图开始-->
                                    <div class="detail-goods-img">
                                        <div class="small-img">
                                            <img src="../assets/images/mall/mall-details-pic1.jpg" >
                                            <div class="mask-float"></div>
                                            <div class="cursor"></div>
                                        </div><!--/small-img-->
                    
                                        <div class="max-img">
                                            <img src="../assets/images/mall/mall-details-pic1.jpg">
                                        </div><!--/max-img-->
                                    </div>
                                    <!--商品大图结束-->
                    
                                    <div class="detail-goods-info">
                                        <div class="goods-tit">
                                            <h3>Apple IPad 2018年新款9.7寸32G</h3>
                                            <p>商品编码：20171016104220811778</p>
                                        </div>
                                        <div class="goods-wrap">
                                            <div class="goods-item">
                                                <span class="span1">价格：</span>
                                                <span class="span2">2006856</span> 积分   (市场参考价： <span class="span2">396</span> 元)
                                            </div>
                                            <div class="goods-item">
                                                <span class="span1">商品品牌：</span>
                                                <span class="brand">Apple</span>
                                            </div>
                                            <div class="goods-item clearfix">
                                                <span class="span1">数量：</span>
                                                <div class="goods-cal clearfix">
                                                    <a href="javascript:;" class="je-reduce"></a>
                                                    <input type="text" id="quantity" name="quantity" maxlength="5" value="1" class="f-l">
                                                    <a href="javascript:;" class="je-add"></a>
                                                </div>
                                                <span class="span3">已兑换 0 件&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;剩余 999件</span>
                                            </div>
                                            <div class="goods-item last"><a href="javascript:void(0)" class="ui-btn-yellow-gradients" id="j-btn-popup-open1">立即兑换</a></div>
                                        </div><!--/goods-wrap-->
                                    </div><!--/detail-goods-info-->
                                </div>
                                <!--商品详情结束-->
                    
                                <!--商品信息开始-->
                                <div class="detail-info">
                                    <div class="info-tit">商品信息</div>
                                    <div class="info-content">
                                        <h4>换购须知：</h4>
                                        <p>
                                            1.积分换购商品后10个工作日内寄出，敬请谅解！<br/>
                                            2.换购商品后不可退换。<br/>
                                            3.请认真填写收货地址及收件人和联系方式。<br/>
                                            4.商品和兑换积分会根据市场价格变动不定期进行调整，敬请关注！<br/>
                                            5.如有疑问及时联系客服。<br/>
                                            6.积分商城所有商品均为正规渠道采购正品。
                                        </p>
                                        <br>
                                        <br>
                                        <img src="../assets/images/mall/mall-details-pic2.jpg" alt="">
                                    </div>
                                </div>
                                <!--商品信息结束-->
                        </div>                        
                        <!-- 商品详情end -->
					</div><!--/container-sticky-wrap-->		
				</div>	<!--/container-->
	            <!-- 底部  -->
	            @@include('../include/footer.html',{"baseurl":".."}) 
	            <!-- 底部end  -->					
			</div><!--/page-->
		</div><!--/wrapper-->

        <!-- 兑换信息弹窗start -->
        <div class="fn-popup-hide">
            <div class="mall-convert-info ">
                <div class="mall-convert-form">
                    <form action="" class="layui-form ui-form" id="j-validform">
                        <h4>兑换商品：Apple IPad 2018年新款9.7寸32G</h4>
                        <div class="ui-form-item">
                            <label class="form-label">收货人：</label>
                            <span class="form-block">
                                <span class="form-input-wrap">
                                    <input  type="text" 
                                            name="name" 
                                            placeholder="请输入收货人姓名" 
                                            class="layui-input" 
                                            datatype="s5-16" 
                                            errormsg="昵称至少5个字符,最多16个字符！"
                                    />
                                </span>
                                <span class="Validform_checktip form-checktip"></span>
                            </span>
                        </div>
                        <div class="ui-form-item">
                            <label class="form-label">手机号码：</label>
                            <span class="form-block">
                                <span class="form-input-wrap">
                                    <input  type="text" 
                                            name="tel" 
                                            placeholder="请输入手机号" 
                                            class="layui-input" 
                                            datatype="m" 
                                            errormsg="请输入正确的手机号！"
                                    />
                                </span>
                                <span class="Validform_checktip form-checktip"></span>
                            </span>
                        </div> 
                        <div class="ui-form-item">
                            <label class="form-label">收货地址：</label>
                            <span class="form-block form-block-short"  id="j-form-linkage">
                                <span class="form-input-wrap">
                                    <select name="city-province" 
                                        lay-filter="province-select" 
                                        data-linkage="#j-select-city" 
                                        data-linkage-first>
                                    <option value="">请选择省</option>
                                </select>
                                </span>
                                <span class="form-input-wrap">
                                    <select name="city-city" 
                                            id="j-select-city" 
                                            lay-filter="cities-select" 
                                            data-linkage="#j-select-county">
                                        <option value="">请选择市</option>
                                    </select>
                                </span>
                                <span class="form-input-wrap">
                                    <select name="city-county" 
                                            id="j-select-county" 
                                            lay-filter="districts-select">
                                        <option value="">请选择县</option>
                                    </select>
                                </span>
                            </span>
                        </div> 
                        <div class="ui-form-item">
                            <label class="form-label"></label>
                            <span class="form-block form-block-long">
                                <span class="form-input-wrap">
                                    <textarea   name="desc" 
                                                placeholder="请输入内容" 
                                                class="layui-textarea"
                                                datatype="*" 
                                                errormsg="地址不能为空！"
                                    ></textarea>
                                </span>
                                <span class="Validform_checktip  form-checktip"></span>
                            </span>
                        </div>
                        <div class="line"></div>
                        <div class="ui-form-item">
                            <label class="form-label">应付积分：</label>
                            <span class="form-block"><span class="form-text">36000</span><span class="form-text1">积分</span>（3600 * 10）</span>
                        </div>  
                        <div class="ui-form-item">
                            <label class="form-label">登录密码：</label>
                            <span class="form-block">
                                <span class="form-input-wrap">                                
                                    <input
                                        type="password" 
                                        name="pwd" 
                                        autocomplete="off"
                                        placeholder="请输入密码" 
                                        class="layui-input" 
                                        datatype="*6-15" 
                                        errormsg="密码范围在6~15位,不能使用空格"
                                    />
                                </span>
                                <span class="Validform_checktip form-checktip"></span>
                            </span>
                        </div> 
                        <div class="ui-form-item">
                            <label class="form-label">验证码：</label>
                            <span class="form-block">
                                <span class="form-code-wrap">
                                    <input
                                        type="text" 
                                        name="code" 
                                        placeholder="请输入验证码" 
                                        class="layui-input" 
                                        datatype="*" 
                                        errormsg="验证码不能为空！"
                                    />
                                    <img src="../assets/images/mall/verification-code.png" alt="">
                                    <a href="javascript:void(0)">看不清，换一个！</a>                              
                                </span>
                                <span class="Validform_checktip form-checktip"></span>
                            </span>
                        </div>                                                                            
                    </form>
                </div>
            </div>
        </div>

        <!-- 兑换信息弹窗end -->


        <!-- 兑换成功弹窗 start -->
        <div class="fn-popup-hide">
            <div class="mall-convert-success">
                <div class="mall-convert-result">
                    <div class="img">
                        <i class="icon icon-smile"></i> 
                    </div>
                    <div class="result">商品兑换成功，请耐心等待！</div>
                    <div class="result-btn">
                        <a href="javascipt:;" class="ui-btn-blue-gradients">查看详情</a>
                        <a href="javascipt:;" class="ui-btn-yellow-gradients">继续兑换</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 兑换成功弹窗 end -->
        <!-- 兑换失败弹窗 start -->
        <div class="fn-popup-hide">
            <div class="mall-convert-fail hide">
                <div class="mall-convert-result">
                    <div class="img">
                        <i class="icon icon-cry"></i> 
                    </div>
                    <div class="result">商品兑换失败!</div>
                    <div class="reason">失败原因：积分不足</div>
                    <div class="result-btn1">
                        <a href="javascipt:;" class="ui-btn-yellow-gradients">去赚积分</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 兑换失败弹窗 end --> 


	    <script type="text/javascript" src="/assets/scripts/vendor.js"></script>
        <script type="text/javascript" src="../assets/scripts/plugins/pyui/index.js"></script>
        <script type="text/javascript" src="/assets/scripts/plugins/validform_v5.3.2/Validform.js"></script>
	    <script type="text/javascript" src="/assets/scripts/commons.js"></script>
        <script>           
            $(function(){
                //商品放大镜显示
                var box = $(".detail-goods-img");//容器
                var smallImg = box.find(".small-img");//小图片
                var mask = smallImg.find(".mask-float");//放大镜
                var moveObj = smallImg.find(".cursor");
                var big = box.find(".max-img");
                var bigImg = big.children("img");//大图片
                //放大镜和大图片显示与隐藏
                smallImg.hover(function(){
                    $(this).children(".mask-float").show();
                    $(this).siblings(".max-img").show();
                },function(){
                    $(this).children(".mask-float").hide();
                    $(this).siblings(".max-img").hide();
                })
                //放大镜移动
                moveObj.on("mousemove",function(event){//通过获取鼠标的坐标赋值给放大镜的left和top值
                    var event = event || window.event;
                    var left = event.pageX-box.offset().left-smallImg.position().left-mask.width()/2;
                    var top = event.pageY-box.offset().top-smallImg.position().top-mask.height()/2;
                    if(left<0){//放大镜left的最小值
                        left = 0;
                    }else if(left>$(this).width()-mask.width()){//放大镜left的最大值
                        left = $(this).width()-mask.width();
                    }
                    if(top<0){//放大镜top的最小值
                        top = 0;
                    }else if(top>$(this).height()-mask.height()){//放大镜top的最大值
                        top = $(this).height()-mask.height();
                    }
                    mask.css({"left":left+"px","top":top+"px"});
                    //大图与小图存在下面的比例关系
                    var bigX = left/($(this).width()-mask.width());
                    var bigY = top/($(this).height()-mask.height());
                    var bigImgLeft = bigX*(bigImg.width()-big.width());
                    var bigImgTop = bigY*(bigImg.height()-big.height());
                    //大图放大
                    bigImg.css({"left":-bigImgLeft+"px","top":-bigImgTop+"px"});
                });

                /**
                * 数量加减按钮
                */
                $(".je-reduce").click(function() {
                    var quantity = parseInt($("#quantity").val());
                    if(!(quantity%1 === 0)){
                        // $.aportal.msg("请填写正确的购买数量", 2, 8);
                        return;
                    }
                    if(quantity>1){
                        $("#quantity").val(quantity-1);
                    }else{
                        $("#quantity").val(1);
                    }
                })
                /**
                * 数量加减按钮
                */
                $(".je-add").click(function() {
                    var quantity = parseInt($("#quantity").val());
                    if(!(quantity%1 === 0)){
                        // $.aportal.msg("请填写正确的购买数量", 2, 8);
                        return;
                    }
                    if(quantity>0){
                        $("#quantity").val(quantity+1);
                    }else{
                        $("#quantity").val(1);
                    }
                });
                //联动下拉
                var forms = CompForms();
                //渲染指定容器下的城市联动
                forms.cityLinkAge({
                    //form表单容器
                    form: '#j-form-linkage'
                });
                /*
                *兑换信息弹窗
                */ 
                var mypopup = CompPopup();
                $('#j-btn-popup-open1').click(function(){
                    mypopup.open({
                        type: 1,
                        //标题
                        title: '积分兑换商品',
                        //这里的content也可以是DOM对象
                        content: $('.mall-convert-info'),
                        // 设置弹窗大小
                        area:["540px"],
                        //按钮居中对齐
			            btnAlign: 'l',
                        //自定义按钮即按钮事件
                        btn: ['立即兑换'],
                        yes: function(){
                            // mypopup.close();
                            // $(".mall-convert-info").hide();
                        },
                        end:function(){
                            console.log("关闭了弹窗！");
                            result.resetForm();
                            $(".mall-convert-info").hide();
                        }
                    });
                    $(".layui-layer-btn0").addClass("ui-btn-yellow-gradients").attr("id","j-btn-submit").attr("href","javascript:void(0)");
                });

                //表单验证
                var validForm = $('#j-validform');
                var result = validForm.Validform({
                    tiptype: 2,
                    showAllError: true,
                });
                $("body").on("click","#j-btn-submit",function(){
                    validForm.submit();                  
                }) 

            });
        </script>
	</body>
</html>
